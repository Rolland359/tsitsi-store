<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Confirmation de Commande</title>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">
    <div style="max-width: 600px; margin: 0 auto; border: 1px solid #ddd; padding: 20px;">
        <h2 style="color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
            Confirmation de Commande N° {{ order.order_number }}
        </h2>

        <p>Bonjour {{ order.full_name }},</p>
        
        <p>Merci pour votre commande passée le {{ order.created|date:"d F Y" }}. Nous avons bien reçu votre paiement et préparons l'expédition.</p>

        <h3 style="color: #333;">Détails de la Commande</h3>
        
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
            <thead>
                <tr style="background-color: #f8f9fa;">
                    <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Produit</th>
                    <th style="padding: 10px; border: 1px solid #ddd; text-align: center;">Qté</th>
                    <th style="padding: 10px; border: 1px solid #ddd; text-align: right;">Prix</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order_items %}
                <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;">{{ item.product.product_name }}</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">{{ item.quantity }}</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">{{ item.sub_total|floatformat:2 }} MGA</td>
                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="2" style="padding: 10px; text-align: right; border: 1px solid #ddd; font-weight: bold;">Sous-Total :</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">{{ sub_total|floatformat:2 }} MGA</td>
                </tr>
                <tr>
                    <td colspan="2" style="padding: 10px; text-align: right; border: 1px solid #ddd; font-weight: bold;">Taxes :</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">{{ order.tax|floatformat:2 }} MGA</td>
                </tr>
                <tr style="background-color: #e9ecef;">
                    <td colspan="2" style="padding: 10px; text-align: right; border: 1px solid #ddd; font-weight: bold;">TOTAL PAYÉ :</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: right; font-size: 1.1em; color: #28a745; font-weight: bold;">{{ order.order_total|floatformat:2 }} MGA</td>
                </tr>
            </tfoot>
        </table>

        <p style="font-size: 0.9em; color: #666; border-top: 1px solid #eee; padding-top: 10px;">
            Vous recevrez un autre email dès l'expédition de votre commande.<br>
            Merci de votre confiance.
        </p>
        <p style="text-align: center; margin-top: 20px;">
            <a href="{{ protocol }}://{{ domain }}{% url 'orders:order_detail' %}" style="background-color: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
                Suivre ma Commande
            </a>
        </p>
    </div>
</body>
</html>